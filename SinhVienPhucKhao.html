<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ thống Quản lý Yêu cầu Phúc khảo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .main-container {
            background: white;
            border-radius: 12px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            width: 100%;
            overflow: hidden;
            
        }
        
        .header {
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border-radius: 20px;
            margin-left: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            
        }
        .header h1 {
            padding-top: 20px;
            font-size: 18px;
            font-weight: bold;
            color:black
            
        }

        .user-info {
            padding: 8px;
            font-size: 18px;
            color: black;
            font-weight: bold;
            background-color: #babcbf48;

        }

        .sidebar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-right: 1px solid #e9ecef;
            width: 220px;
            height:1500px ;
            float: left;
            line-height: 50px;
        }
        .sidebar ul h1 {
            margin-top: 5px;
            padding-left: 20px;
            color: white;
            font-size: 18px;
        }
        .sidebar ul h2 {
            padding-left: 20px;
            color: white;
            font-size : 13px;
            margin-top: -10px;
            opacity: 0.8;
        }
        .sidebar ul h1:hover {
            transform: translateY(-5px);
            color: #eae735
        }
        .sidebar ul h2:hover {
            transform: translateY(-5px);
            color: #eae735
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }

        .sidebar li {
            border-bottom: 1px solid #e9ecef00;
        }

        .sidebar a {
            display: block;
            padding: 12px 22px;
            text-decoration: none;
            color: #e7e9eb;
            font-size: 18px;
            transition: all 0.3s ease;
            cursor: pointer;
            font-weight: 600;
        }
        
        .sidebar a:hover, .sidebar a.active {
            background: #efeef02f;
            color: white;
        }

        .content {
            margin-left: 200px;
            padding-left: 20px;
            min-height: 600px;
        }

        .breadcrumb {
            color: #6c757d;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .form-section {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .form-section h3 {
            color: #495057;
            font-size: 16px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #007bff;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            align-items: center;
        }

        .form-group {
            flex: 1;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: #495057;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 2px rgba(0,123,255,0.25);
        }

        .subjects-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .subjects-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px;
            text-align: center;
            font-weight: 600;
        }

        .subjects-table td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }

        .subjects-table tr:hover {
            background: #f8f9fa;
        }

        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,123,255,0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(40,167,69,0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .action-buttons {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e9ecef;
        }

        .action-buttons .btn {
            margin: 0 10px;
            padding: 12px 30px;
            font-size: 16px;
        }

        .alert {
            padding: 12px 20px;
            border-radius: 4px;
            margin-bottom: 20px;
            border-left: 4px solid;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border-color: #28a745;
        }

        .alert-info {
            margin-top: 10px;
            background: #d1ecf1;
            color: #0c5460;
            border-color: #17a2b8;
            margin-left: 10px;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-approved {
            background: #d4edda;
            color: #155724;
        }

        .status-rejected {
            background: #f8d7da;
            color: #721c24;
        }

        .status-processing {
            background: #cce5ff;
            color: #004085;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card .icon {
            font-size: 2.7em;
            margin-bottom: 10px;
        }

        .stat-card .number {
            font-size: 2em;
            font-weight: bold;
            color: #007bff;
        }

        .stat-card .label {
            color: #6c757d;
            font-size: 14px;
        }

        .filter-row {
            display: flex;
            gap: 15px;
            align-items: end;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .filter-row .form-group {
            min-width: 150px;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
            padding: 15px;
        }

        .pagination button {
            padding: 8px 12px;
            border: 1px solid #dee2e6;
            background: white;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .pagination button:hover {
            background: #007bff;
            color: white;
        }

        .pagination button.active {
            background: #007bff;
            color: white;
        }

        .quick-actions {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .quick-actions h4 {
            margin-bottom: 15px;
            color: #495057;
        }

        .quick-actions .btn {
            margin: 5px;
        }

        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                float: none;
                min-height: auto;
            }

            .content {
                margin-left: 0;
                padding: 20px;
            }

            .form-row, .filter-row {
                flex-direction: column;
                gap: 10px;
            }

            .subjects-table {
                font-size: 12px;
            }

            .subjects-table th, .subjects-table td {
                padding: 8px 4px;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
        .page .content{
            margin-left: auto;
        }
    </style>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet" />
</head>
<body>
    <div class="main-container">
        <div class="sidebar">
            <ul>
                <h1>🎓 Sinh Viên</h1>
                <h2>Hệ thống quản lý phúc khảo</h2>
                <li><a href="#" class="nav-link active" data-page="home">🏠 Trang chủ</a></li>
                <li><a href="#" class="nav-link" data-page="new-request">📝 Nộp đơn Mới</a></li>
                <li><a href="#" class="nav-link" data-page="history">📋 Lịch sử</a></li>
                <li><a href="#" class="nav-link" data-page="stats">📊 Thống kê</a></li>
                <li><a href="#" class="nav-link" data-page="help">💬 Trợ giúp</a></li>
                <li><a href="DangNhap.html" class="nav-link" data-page="logout">🚪 Đăng Xuất</a></li>
            </ul>
        </div>

        <div class="content">
            <!-- TRANG CHỦ -->
              <div class="header">
                <div class="breadcrumb">
                    <h1 id="pageTitle">🏠 Trang chủ - Hệ Thống Phúc Khảo</h1>
                </div>
                <div class="user-info">
                    <i class="fas fa-user-circle text-black text-xl"></i> SV: Nguyễn Văn A
                </div>
            </div>
            
            <div id="homePage" class="page active">
                
                <div class="alert alert-info">
                    <strong>🎉 Chào mừng!</strong> Hệ thống quản lý yêu cầu phúc khảo giúp bạn theo dõi và quản lý các đơn phúc khảo một cách dễ dàng.
                </div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="icon">📝</div>
                        <div class="number" id="totalRequests">5</div>
                        <div class="label">Tổng đơn đã nộp</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon">⏳</div>
                        <div class="number" id="pendingRequests">2</div>
                        <div class="label">Đang xử lý</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon">✅</div>
                        <div class="number" id="approvedRequests">2</div>
                        <div class="label">Đã duyệt</div>
                    </div>
                    <div class="stat-card">
                        <div class="icon">❌</div>
                        <div class="number" id="rejectedRequests">1</div>
                        <div class="label">Từ chối</div>
                    </div>
                </div>

                <div class="quick-actions">
                    <h4>🚀 Thao tác nhanh</h4>
                    <button class="btn btn-primary" onclick="navigateToPage('new-request')">📝 Nộp đơn phúc khảo mới</button>
                    <button class="btn btn-secondary" onclick="navigateToPage('history')">📋 Xem lịch sử</button>
                    <button class="btn btn-success" onclick="checkNotifications()">🔔 Kiểm tra thông báo</button>
                </div>

                <div class="form-section">
                    <h3>📊 Tình trạng mới nhất</h3>
                    <table class="subjects-table">
                        <thead>
                            <tr>
                                <th>Môn học</th>
                                <th>Ngày nộp</th>
                                <th>Trạng thái</th>
                                <th>Kết quả</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Giải Tích</td>
                                <td>15/03/2025</td>
                                <td><span class="status-badge status-approved">Đã duyệt</span></td>
                                <td>6.5 → 7.0</td>
                            </tr>
                            <tr>
                                <td>OOP</td>
                                <td>12/03/2025</td>
                                <td><span class="status-badge status-processing">Đang xử lý</span></td>
                                <td>4.0 → ?</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- TRANG NỘP ĐƠN MỚI -->
             <div id="newRequestPage" class="page" style="display: none;">
                <div class="content" >
                    <div class="alert alert-info">
                        <strong>ℹ️ Lưu ý:</strong> Vui lòng kiểm tra kỹ thông tin trước khi nộp đơn phúc khảo. Thời hạn nộp đơn là 7 ngày kể từ ngày công bố điểm.
                    </div>

                    <div class="form-section">
                        <h3>📋 Đơn phúc khảo mới</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>👤 Chọn mẫu học:</label>
                                <input type="text" value="Học kỳ I - 2025" readonly>
                            </div>
                            <div class="form-group">
                                <label>📅 Nhập thông tin:</label>
                                <input type="date" id="ngayNop" value="2025-08-05">
                            </div>
                            <div class="form-group">
                                <label>👁️ Xác nhận:</label>
                                <input type="checkbox" id="xacNhan" style="width: auto; margin-right: 5px;">
                                <label for="xacNhan" style="display: inline;">Đã kiểm tra thông tin</label>
                            </div>
                        </div>

                        <table class="subjects-table">
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>📚 Môn học</th>
                                    <th>📊 Điểm hiện tại</th>
                                    <th>🎯 Thao tác</th>
                                </tr>
                            </thead>
                            <tbody id="subjectsTable">
                                <tr>
                                    <td>1</td>
                                    <td>Giải Tích</td>
                                    <td><span class="status-badge status-pending">6.5</span></td>
                                    <td><button class="btn btn-primary" onclick="requestReview(1, 'Giải Tích', 6.5)">📝 Chọn</button></td>
                                </tr>
                                <tr>
                                    <td>2</td>
                                    <td>Toán Rời Rạc</td>
                                    <td><span class="status-badge status-pending">5.0</span></td>
                                    <td><button class="btn btn-primary" onclick="requestReview(2, 'Toán Rời Rạc', 5.0)">📝 Chọn</button></td>
                                </tr>
                                <tr>
                                    <td>3</td>
                                    <td>OOP</td>
                                    <td><span class="status-badge status-pending">4.0</span></td>
                                    <td><button class="btn btn-primary" onclick="requestReview(3, 'OOP', 4.0)">📝 Chọn</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="form-section" id="reviewForm" style="display: none;">
                        <h3>📝 Thông tin đơn phúc khảo</h3>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label>📚 Môn học:</label>
                                <input type="text" id="selectedSubject" readonly>
                            </div>
                            <div class="form-group">
                                <label>📊 Điểm hiện tại:</label>
                                <input type="text" id="currentGrade" readonly>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>🎯 Điểm mong muốn:</label>
                                <input type="number" id="expectedGrade" min="0" max="10" step="0.1" placeholder="Nhập điểm mong muốn">
                            </div>
                            <div class="form-group">
                                <label>📞 Số điện thoại liên hệ:</label>
                                <input type="tel" id="phoneNumber" placeholder="Nhập số điện thoại">
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>✉️ Email liên hệ:</label>
                                <input type="email" id="email" placeholder="Nhập email liên hệ">
                            </div>
                            <div class="form-group">
                                <label>📂 Loại phúc khảo:</label>
                                <select id="reviewType">
                                    <option value="">Chọn loại phúc khảo</option>
                                    <option value="midterm">Điểm giữa kỳ</option>
                                    <option value="final">Điểm cuối kỳ</option>
                                    <option value="assignment">Điểm bài tập</option>
                                    <option value="project">Điểm đồ án</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>📋 Lý do phúc khảo:</label>
                                <textarea id="reason" rows="4" placeholder="Mô tả chi tiết lý do yêu cầu phúc khảo, bao gồm các câu hỏi hoặc phần thi cụ thể mà bạn cho rằng cần được xem xét lại..."></textarea>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label>📎 Tài liệu đính kèm (nếu có):</label>
                                <input type="file" id="attachments" multiple accept=".pdf,.doc,.docx,.jpg,.png">
                                <small style="color: #6c757d;">Chấp nhận file: PDF, DOC, DOCX, JPG, PNG (tối đa 10MB)</small>
                            </div>
                        </div>
                    </div>

                    <div class="action-buttons">
                        <button class="btn btn-secondary" onclick="resetForm()">🔄 Làm lại</button>
                        <button class="btn btn-success" onclick="submitRequest()">📤 Nộp đơn</button>
                    </div>
                </div>
            </div>
            <!-- TRANG LỊCH SỬ -->
            <div id="historyPage" class="page" style="display: none;">
            

                <div class="form-section">
                    <h3>📋 Danh sách đơn phúc khảo</h3>
                    
                    <div class="filter-row">
                        <div class="form-group">
                            <label>📅 Từ cả học kỳ:</label>
                            <select id="semesterFilter">
                                <option value="">Tất cả học kỳ</option>
                                <option value="2024-1">Học kỳ I - 2024</option>
                                <option value="2025-1" selected>Học kỳ I - 2025</option>
                                <option value="2025-2">Học kỳ II - 2025</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>📊 Tất cả trạng thái:</label>
                            <select id="statusFilter">
                                <option value="">Tất cả trạng thái</option>
                                <option value="pending">Đang xử lý</option>
                                <option value="approved">Đã duyệt</option>
                                <option value="rejected">Từ chối</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>🔍 Nhập tên môn học:</label>
                            <input type="text" id="subjectFilter" placeholder="Tên môn học...">
                        </div>
                        <div class="form-group">
                            <button class="btn btn-primary" onclick="filterHistory()">🔍 Lọc</button>
                        </div>
                    </div>

                    <table class="subjects-table" id="historyTable">
                        <thead>
                            <tr>
                                <th>Mã đơn</th>
                                <th>📚 Môn học</th>
                                <th>📅 Ngày nộp</th>
                                <th>📊 Điểm trước</th>
                                <th>🎯 Điểm sau</th>
                                <th>📋 Trạng thái</th>
                                <th>🎯 Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="historyTableBody">
                            <tr>
                                <td>PK01</td>
                                <td>Giải Tích</td>
                                <td>15/03/2025</td>
                                <td>6.5</td>
                                <td>7.0</td>
                                <td><span class="status-badge status-approved">Đã duyệt</span></td>
                                <td><button class="btn btn-primary" onclick="viewDetail('PK01')">👁️ Xem</button></td>
                            </tr>
                            <tr>
                                <td>PK02</td>
                                <td>Kỹ thuật lập trình</td>
                                <td>14/03/2025</td>
                                <td>5.0</td>
                                <td>6.0</td>
                                <td><span class="status-badge status-approved">Đã duyệt</span></td>
                                <td><button class="btn btn-primary" onclick="viewDetail('PK02')">👁️ Xem</button></td>
                            </tr>
                            <tr>
                                <td>PK03</td>
                                <td>OOP</td>
                                <td>12/03/2025</td>
                                <td>4.0</td>
                                <td>4.0</td>
                                <td><span class="status-badge status-rejected">Từ chối</span></td>
                                <td><button class="btn btn-primary" onclick="viewDetail('PK03')">👁️ Xem</button></td>
                            </tr>
                            <tr>
                                <td>PK04</td>
                                <td>Toán Rời Rạc</td>
                                <td>10/03/2025</td>
                                <td>5.5</td>
                                <td>-</td>
                                <td><span class="status-badge status-processing">Đang xử lý</span></td>
                                <td><button class="btn btn-primary" onclick="viewDetail('PK04')">👁️ Xem</button></td>
                            </tr>
                            <tr>
                                <td>PK05</td>
                                <td>Cấu trúc dữ liệu</td>
                                <td>08/03/2025</td>
                                <td>7.0</td>
                                <td>-</td>
                                <td><span class="status-badge status-processing">Đang xử lý</span></td>
                                <td><button class="btn btn-primary" onclick="viewDetail('PK05')">👁️ Xem</button></td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="pagination">
                        <button onclick="changePage(-1)">‹ Trước</button>
                        <button class="active">1</button>
                        <button onclick="changePage(2)">2</button>
                        <button onclick="changePage(3)">3</button>
                        <button onclick="changePage(1)">Sau ›</button>
                    </div>
                </div>
            </div>

            <!-- TRANG THỐNG KÊ -->
            <div id="statsPage" class="page" style="display: none;">
               
                <div class="alert alert-info">
                    <strong>📊 Thống kê:</strong> Trang này đang được phát triển và sẽ có sẵn sớm.
                </div>
            </div>

            <!-- TRANG TRỢ GIÚP -->
            <div id="helpPage" class="page" style="display: none;">
              
                <div class="form-section">
                    <h3>💬 Hướng dẫn sử dụng</h3>
                    <p><strong>📝 Nộp đơn phúc khảo:</strong> Chọn môn học và điền đầy đủ thông tin yêu cầu.</p>
                    <p><strong>📋 Theo dõi lịch sử:</strong> Xem trạng thái và kết quả các đơn đã nộp.</p>
                    <p><strong>📞 Liên hệ hỗ trợ:</strong> Email: support@university.edu.vn | SĐT: 1900-xxxx</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let selectedSubjectData = null;
        let currentPage = 1;
        let historyData = [];

        // Navigation system - Lựa Chọn Trang
        function navigateToPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page').forEach(page => {
                page.style.display = 'none';
            });

            // Remove active class from all nav links 
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });

            // Show selected page 
            const targetPage = document.getElementById(pageId === 'new-request' ? 'newRequestPage' : pageId + 'Page');
            if (targetPage) {
                targetPage.style.display = 'block';
            }

            // Add active class to current nav link
            const targetNav = document.querySelector(`[data-page="${pageId}"]`);
            if (targetNav) {
                targetNav.classList.add('active');
            }

            // Update page title
            const titles = {
                'home': '🏠 Trang Chủ - Hệ thống Phúc khảo',
                'new-request': '📝 Nộp Đơn Mới - Hệ thống Phúc Khảo',
                'history': '📋 Lịch Sử - Hệ Thống Phúc Khảo',
                'stats': '📊 Thống kê - Hệ thống Phúc Khảo',
                'help': '💬 Trợ Giúp - Hệ Thống Phúc Khảo'
            };
            
            document.getElementById('pageTitle').textContent = titles[pageId] || titles['home'];
        }

        // Initialize navigation 
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const pageId = this.getAttribute('data-page');
                    navigateToPage(pageId);
                });
            });
        });

        // Request review functionality
        function requestReview(stt, subject, grade) {
            selectedSubjectData = { stt, subject, grade };
            
            document.getElementById('selectedSubject').value = subject;
            document.getElementById('currentGrade').value = grade;
            document.getElementById('reviewForm').style.display = 'block';
            
            // Scroll to form
            document.getElementById('reviewForm').scrollIntoView({ behavior: 'smooth' });
            
            // Update button states
            const buttons = document.querySelectorAll('.subjects-table .btn');
            buttons.forEach(btn => {
                btn.textContent = '📝 Chọn';
                btn.className = 'btn btn-primary';
            });
            
            event.target.textContent = '✅ Đã chọn';
            event.target.className = 'btn btn-success';
        }

        function resetForm() {
            document.getElementById('reviewForm').style.display = 'none';
            selectedSubjectData = null;
            
            // Reset all form fields
            document.getElementById('expectedGrade').value = '';
            document.getElementById('phoneNumber').value = '';
            document.getElementById('email').value = '';
            document.getElementById('reviewType').value = '';
            document.getElementById('reason').value = '';
            document.getElementById('attachments').value = '';
            
            // Reset button states
            const buttons = document.querySelectorAll('.subjects-table .btn');
            buttons.forEach(btn => {
                btn.textContent = '📝 Chọn';
                btn.className = 'btn btn-primary';
            });
        }

        function submitRequest() {
            if (!selectedSubjectData) {
                alert('⚠️ Vui lòng chọn môn học cần phúc khảo!');
                return;
            }

            const expectedGrade = document.getElementById('expectedGrade').value;
            const phoneNumber = document.getElementById('phoneNumber').value;
            const email = document.getElementById('email').value;
            const reviewType = document.getElementById('reviewType').value;
            const reason = document.getElementById('reason').value;
            const xacNhan = document.getElementById('xacNhan').checked;

            if (!expectedGrade || !phoneNumber || !email || !reviewType || !reason) {
                alert('⚠️ Vui lòng điền đầy đủ thông tin!');
                return;
            }

            if (!xacNhan) {
                alert('⚠️ Vui lòng xác nhận đã kiểm tra thông tin!');
                return;
            }

            if (parseFloat(expectedGrade) <= selectedSubjectData.grade) {
                alert('⚠️ Điểm mong muốn phải cao hơn điểm hiện tại!');
                return;
            }

            if (parseFloat(expectedGrade) > 10) {
                alert('⚠️ Điểm mong muốn không được vượt quá 10!');
                return;
            }

            // Simulate submission
            const submitButton = event.target;
            const originalText = submitButton.textContent;
            
            submitButton.textContent = '⏳ Đang gửi...';
            submitButton.disabled = true;
            
            setTimeout(() => {
                alert(`✅ Đã nộp đơn phúc khảo thành công!
                
            📚 Môn học: ${selectedSubjectData.subject}
            📊 Điểm hiện tại: ${selectedSubjectData.grade}
            🎯 Điểm mong muốn: ${expectedGrade}
            📂 Loại phúc khảo: ${reviewType}
            📞 Số điện thoại: ${phoneNumber}
            ✉️ Email: ${email}

            Đơn của bạn sẽ được xử lý trong vòng 5-7 ngày làm việc. Chúng tôi sẽ thông báo kết quả qua email và SMS.`);
                
                resetForm();
                submitButton.textContent = originalText;
                submitButton.disabled = false;
                
                // Add to history simulation
                addToHistory(selectedSubjectData.subject, expectedGrade, reviewType);
                updateStats();
            }, 2000);
        }

        function addToHistory(subject, expectedGrade, reviewType) {
            const newRequest = {
                id: 'PK' + String(Math.floor(Math.random() * 1000)).padStart(2, '0'),
                subject: subject,
                date: new Date().toLocaleDateString('vi-VN'),
                gradeBefore: selectedSubjectData.grade,
                gradeAfter: '-',
                status: 'processing',
                type: reviewType
            };
        // Set default values
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('ngayNop').value = today;
            
            // Add some interactive effects
            const tableRows = document.querySelectorAll('.subjects-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.02)';
                    this.style.transition = 'all 0.3s ease';
                });
                
                row.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });
        });

        // Add keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                submitRequest();
            }
            if (e.key === 'Escape') {
                resetForm();
            }
        });
            // Add to beginning of history
            const tbody = document.getElementById('historyTableBody');
            const newRow = createHistoryRow(newRequest);
            tbody.insertBefore(newRow, tbody.firstChild);
            
            console.log('Added to history:', newRequest);
        }

        function createHistoryRow(request) {
            const row = document.createElement('tr');
            const statusClass = {
                'processing': 'status-processing',
                'approved': 'status-approved',
                'rejected': 'status-rejected',
                'pending': 'status-pending'
            }[request.status] || 'status-pending';

            const statusText = {
                'processing': 'Đang xử lý',
                'approved': 'Đã duyệt',
                'rejected': 'Từ chối',
                'pending': 'Chờ xử lý'
            }[request.status] || 'Chờ xử lý';

            row.innerHTML = `
                <td>${request.id}</td>
                <td>${request.subject}</td>
                <td>${request.date}</td>
                <td>${request.gradeBefore}</td>
                <td>${request.gradeAfter}</td>
                <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                <td><button class="btn btn-primary" onclick="viewDetail('${request.id}')">👁️ Xem</button></td>
            `;
            return row;
        }

        function updateStats() {
            // Update statistics on home page
            const totalRequests = document.querySelectorAll('#historyTableBody tr').length;
            const historyTable = document.getElementById('historyTableBody');
            const processingRequests = historyTable.querySelectorAll('.status-processing').length;
            const approvedRequests = historyTable.querySelectorAll('.status-approved').length;
            const rejectedRequests = historyTable.querySelectorAll('.status-rejected').length;

            document.getElementById('totalRequests').textContent = totalRequests;
            document.getElementById('pendingRequests').textContent = processingRequests;
            document.getElementById('approvedRequests').textContent = approvedRequests;
            document.getElementById('rejectedRequests').textContent = rejectedRequests;
        }

        // History page functions
        function filterHistory() {
            const semesterFilter = document.getElementById('semesterFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;
            const subjectFilter = document.getElementById('subjectFilter').value.toLowerCase();

            const rows = document.querySelectorAll('#historyTableBody tr');
            
            rows.forEach(row => {
                let show = true;
                
                if (subjectFilter && !row.cells[1].textContent.toLowerCase().includes(subjectFilter)) {
                    show = false;
                }
                
                if (statusFilter) {
                    const statusBadge = row.querySelector('.status-badge');
                    const statusClass = statusBadge.className;
                    if (!statusClass.includes(statusFilter === 'pending' ? 'processing' : statusFilter)) {
                        show = false;
                    }
                }
                
                row.style.display = show ? '' : 'none';
            });
        }

        function viewDetail(requestId) {
            alert(`📋 Chi tiết đơn phúc khảo ${requestId}

            Thông tin chi tiết sẽ được hiển thị trong modal popup.
            Tính năng này đang được phát triển.

            Bạn có thể liên hệ phòng đào tạo để biết thêm chi tiết.`);
                    }

        function changePage(page) {
            if (typeof page === 'number' && page > 0) {
                currentPage = page;
                // Update pagination buttons
                document.querySelectorAll('.pagination button').forEach(btn => {
                    btn.classList.remove('active');
                });
                event.target.classList.add('active');
            }
        }

        // Home page functions
        function checkNotifications() {
            alert(`🔔 Thông báo mới

                • Đơn phúc khảo PK01 (Giải Tích) đã được duyệt
                • Đơn phúc khảo PK04 (Toán Rời Rạc) đang được xem xét
                • Hạn nộp đơn phúc khảo học kỳ: 20/03/2025

                📧 Kiểm tra email để biết thêm chi tiết.`);
                        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date().toISOString().split('T')[0];
            const dateInput = document.getElementById('ngayNop');
            if (dateInput) {
                dateInput.value = today;
            }
            
            // Add interactive effects
            const tableRows = document.querySelectorAll('.subjects-table tbody tr');
            tableRows.forEach(row => {
                row.addEventListener('mouseenter', function() {
                    this.style.transform = 'scale(1.02)';
                    this.style.transition = 'all 0.3s ease';
                });
                
                row.addEventListener('mouseleave', function() {
                    this.style.transform = 'scale(1)';
                });
            });

            // Initialize stats
            updateStats();
        });
        //Log out
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const page = link.getAttribute('data-page');
                if (page === 'logout') {
                    if (confirm('Bạn có chắc chắn muốn đăng xuất?')) {
                        
                        alert('Đã đăng xuất!');
                        window.location="DangNhap.html";
                    }
                } else {
                    navigateToPage(page);
                }
            });
        });
        // Keyboard shortcuts
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'Enter') {
                const currentPageEl = document.querySelector('.page[style*="block"]') || document.querySelector('.page');
                if (currentPageEl && currentPageEl.id === 'newRequestPage') {
                    submitRequest();
                }
            }
            if (e.key === 'Escape') {
                resetForm();
            }
            // Navigation shortcuts
            if (e.altKey) {
                switch(e.key) {
                    case '1': navigateToPage('home'); break;
                    case '2': navigateToPage('new-request'); break;
                    case '3': navigateToPage('history'); break;
                    case '4': navigateToPage('stats'); break;
                    case '5': navigateToPage('help'); break;
                }
            }
        });
    </script>
</body>
</html>